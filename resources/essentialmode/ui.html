<head>
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:light,regular,medium,thin,italic,mediumitalic,bold" title="roboto">
	<link href="https://fonts.googleapis.com/css?family=Raleway:400,300,600,800,900" rel="stylesheet" type="text/css">
	<script src="nui://game/ui/jquery.js" type="text/javascript"></script>
	<script src="progressbar.js" type="text/javascript"></script>
	<script>
		function addCommas(nStr) {
			nStr += '';
			var x = nStr.split('.');
			var x1 = x[0];
			var x2 = x.length > 1 ? '.' + x[1] : '';
			var rgx = /(\d+)(\d{3})/;
			while (rgx.test(x1)) {
				x1 = x1.replace(rgx, '$1' + '<span style="margin-left: 3px; margin-right: 3px;"/>' + '$2');
			}
			return x1 + x2;
		}

		window.onload = function(e){
			// NUI Callback


			window.addEventListener('message', function(event){
				var item = event.detail;

				if(item.setmoney == true) {

					document.getElementById("cash").innerHTML = addCommas(item.money) 
					+ "<div style='display:inline-block;padding-left: 10px;'><font style='color: rgb(0, 125, 0); font-weight: 700; margin-right: 6px;'> €</font>" ;
					
				}

				if (item.starving.activate) {
					// progressbar.js@1.0.0 version is used
					// Docs: http://progressbarjs.readthedocs.org/en/1.0.0/

					var hunger = new ProgressBar.SemiCircle(container, {
					  strokeWidth: 6,
					  color: '#00cc00',
					  trailColor: '#00cc00',
					  trailWidth: 1,
					  easing: 'easeInOut',
					  duration: 1400,
					  svgStyle: null,
					  text: {
					    value: '',
					    alignToBottom: false
					  },
					  from: {color: '#222222'},
					  to: {color: '#00cc00'},
					  // Set default step function for all animate calls
					  step: (state, hunger) => {
					    hunger.path.setAttribute('stroke', state.color);
					    var value = Math.round(hunger.value() * 100);
					    if (value === 0) {
					      hunger.setText('');
					    } else {
					      hunger.setText(value);
					    }

					    hunger.text.style.color = state.color;
					  }
					});
					var thirst = new ProgressBar.SemiCircle(container, {
					  strokeWidth: 6,
					  color: '#0000cc',
					  trailColor: '#0000cc',
					  trailWidth: 1,
					  easing: 'easeInOut',
					  duration: 1400,
					  svgStyle: null,
					  text: {
					    value: '',
					    alignToBottom: false
					  },
					  from: {color: '#222222'},
					  to: {color: '#0000cc'},
					  // Set default step function for all animate calls
					  step: (state, thirst) => {
					    thirst.path.setAttribute('stroke', state.color);
					    var value = Math.round(thirst.value() * 100);
					    if (value === 0) {
					      thirst.setText('');
					    } else {
					      thirst.setText(value);
					    }

					    thirst.text.style.color = state.color;
					  }
					});

					hunger.text.style.fontFamily = '"Raleway", Helvetica, sans-serif';
					hunger.text.style.fontSize = '2rem';

					thirst.text.style.fontFamily = '"Raleway", Helvetica, sans-serif';
					thirst.text.style.fontSize = '2rem';

					hunger.animate(item.starving.hunger / 100);  // Number from 0.0 to 1.0
					thirst.animate(item.starving.thirst / 100);  // Number from 0.0 to 1.0

					$('.progressbar-text').first().css('top', '0px')
					$('.progressbar-text').last().css('top', '115px')
					$('svg').last().css('transform', 'rotate(180deg)')
					$('container svg').css('width', '200px')

				}
				if(item.addcash == true){
					$('.tiny').remove();

					var element = $("<div class='tiny'>+ "+addCommas(item.money)+"<font style='color: rgb(0, 125, 0); font-weight: 700; margin-right: 6px;'> €</font></div>")
					$("#money").append(element)

					setTimeout(function(){
						$(element).fadeOut(600, function() { $(this).remove(); })
					}, 1000)
				}
				if(item.removecash == true){
					$('.tiny').remove();

					var element = $("<div class='tiny'>- "+addCommas(item.money)+"<font style='color: rgb(250, 0, 0); font-weight: 700; margin-right: 6px;'> €</font></div>")
					$("#money").append(element)

					setTimeout(function(){
						$(element).fadeOut(600, function() { $(this).remove(); })
					}, 1000)
				}
				if(item.removeStartWindow == true){
					$("#starter").remove();
				}
				if(item.setDisplay == true){
					$("#money").css('opacity', item.display)
				}

				if(item.starving == true) {
					
				}
			})
		}
	</script>

	<style>
		@font-face {
			font-family: pcdown;
			src: url(pdown.ttf);
		}
		.tiny {
			font-size: 29px;
			position: absolute; right: 10;
			display: inline-block;
		}
		#money {
			font-family: pcdown;
			font-size: 35px;
			color: white;
			padding: 4px;
		text-shadow:
		   -1px -1px 0 #000,
			1px -1px 0 #000,
			-1px 1px 0 #000,
			 1px 1px 0 #000;
				}

		#starve-div {
			width: 200px;
			height: 100px;
		}

		#container {
			position: absolute;
			top: 40; right: 40;
		}
	</style>
</head>

<body>
	<div id="starter" style="font-family: 'roboto'; color: white; position: absolute; left: 20%; top: 5%; width: 60%; background: rgba(40, 40, 40, 0.8)">

	</div>
	<div id="container">
		<div id="money">

			<div id="cash"></div>
			<div id="starve-div">
				<div id="starve"></div>
			</div>
		</div>
	</div>
</body>
